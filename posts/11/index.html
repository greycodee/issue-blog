<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="原因身处墙国，拉取镜像非常慢，所以要设置代理来提升拉取镜像的速度。## 设置方法- 创建文件夹shell$ sudo mkdir -p /etc/systemd/system/docker.service.d- 新建配置文件shell$ sudo vim /etc/systemd/system/docker.service.d/http-proxy.conf填入代理配置：toml[Service]Environment=&#34;HTTP_PROXY=http://127.0.0.1:7890&#34;Environment=&#34;HTTPS_PROXY=http://127.0.0.1:7890&#34;Environment=&#34;NO_PROXY=your-registry.com,10.10.10.10,*.example.com&#34;> 如果你自己建了私有的镜像仓库，需要 dockerd 绕过代理服务器直连，那么配置 NO_PROXY 变量，多个 NO_PROXY 变量的值用逗号分隔，而且可以使用通配符（*），极端情况下，如果 NO_PROXY=*，那么所有请求都将不通过代理服务器。如果不需要可以直接不设置这个变量- 重启服务shell$ sudo systemctl daemon-reload$ sudo systemctl restart docker- 检查配置shell$ sudo systemctl show --property=Environment docker[sudo] password for zheng:Environment=HTTP_PROXY=http://127.0.0.1:7890 HTTPS_PROXY=http://127.0.0.1:7890设置成功🎉 "><title>Docker 客户端(Linux)配置代理 pull 镜像</title><link rel="shortcut icon" type=image/x-icon href=/issues-blog/><link rel=stylesheet href=/issues-blog/css/main.ebe15b0394daa6798b8a40aa572a71b5a7a1beb8cc02c392f5c142e7d08ddb6052e049639385106440b538f394884685082b7441eef27a6a8315ec723155dc15.css integrity="sha512-6+FbA5TapnmLikCqVypxtaehvrjMAsOS9cFC59CN22BS4Eljk4UQZEC1OPOUiEaFCCt0Qe7yemqDFexyMVXcFQ=="></head><body a=auto><main class=page-content aria-label=Content><div class=w><a href=/>..</a><article><p class=post-meta><time datetime="2023-03-17 14:58:24 +0800 +0800">2023-03-17</time></p><h1>Docker 客户端(Linux)配置代理 pull 镜像</h1><h2 id=原因-身处墙国拉取镜像非常慢所以要设置代理来提升拉取镜像的速度---设置方法---创建文件夹-shell--sudo-mkdir--p-etcsystemdsystemdockerserviced----新建配置文件-shell--sudo-vim-etcsystemdsystemdockerservicedhttp-proxyconf--填入代理配置-toml-service-environmenthttp_proxyhttp1270017890-environmenthttps_proxyhttp1270017890-environmentno_proxyyour-registrycom10101010examplecom---如果你自己建了私有的镜像仓库需要-dockerd-绕过代理服务器直连那么配置-no_proxy-变量多个-no_proxy-变量的值用逗号分隔而且可以使用通配符极端情况下如果-no_proxy那么所有请求都将不通过代理服务器如果不需要可以直接不设置这个变量----重启服务-shell--sudo-systemctl-daemon-reload--sudo-systemctl-restart-docker----检查配置-shell--sudo-systemctl-show---propertyenvironment-docker-sudo-password-for-zheng-environmenthttp_proxyhttp1270017890-https_proxyhttp1270017890--设置成功>原因
身处墙国，拉取镜像非常慢，所以要设置代理来提升拉取镜像的速度。
## 设置方法
- 创建文件夹
<code>shell
$ sudo mkdir -p /etc/systemd/system/docker.service.d</code>
- 新建配置文件
<code>shell
$ sudo vim /etc/systemd/system/docker.service.d/http-proxy.conf</code>
填入代理配置：
<code>toml
[Service]
Environment="HTTP_PROXY=http://127.0.0.1:7890"
Environment="HTTPS_PROXY=http://127.0.0.1:7890"
Environment="NO_PROXY=your-registry.com,10.10.10.10,*.example.com"</code>
> 如果你自己建了私有的镜像仓库，需要 dockerd 绕过代理服务器直连，那么配置 <code>NO_PROXY</code> 变量，多个 <code>NO_PROXY</code> 变量的值用逗号分隔，而且可以使用通配符（*），极端情况下，如果 <code>NO_PROXY=*</code>，那么所有请求都将不通过代理服务器。如果不需要可以直接不设置这个变量
- 重启服务
<code>shell
$ sudo systemctl daemon-reload
$ sudo systemctl restart docker</code>
- 检查配置
<code>shell
$ sudo systemctl show --property=Environment docker
[sudo] password for zheng:
Environment=HTTP_PROXY=http://127.0.0.1:7890 HTTPS_PROXY=http://127.0.0.1:7890</code>
设置成功🎉</h2></article></div></main></body></html>