<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="åŸå› èº«å¤„å¢™å›½ï¼Œæ‹‰å–é•œåƒéå¸¸æ…¢ï¼Œæ‰€ä»¥è¦è®¾ç½®ä»£ç†æ¥æå‡æ‹‰å–é•œåƒçš„é€Ÿåº¦ã€‚## è®¾ç½®æ–¹æ³•- åˆ›å»ºæ–‡ä»¶å¤¹shell$ sudo mkdir -p /etc/systemd/system/docker.service.d- æ–°å»ºé…ç½®æ–‡ä»¶shell$ sudo vim /etc/systemd/system/docker.service.d/http-proxy.confå¡«å…¥ä»£ç†é…ç½®ï¼štoml[Service]Environment=&#34;HTTP_PROXY=http://127.0.0.1:7890&#34;Environment=&#34;HTTPS_PROXY=http://127.0.0.1:7890&#34;Environment=&#34;NO_PROXY=your-registry.com,10.10.10.10,*.example.com&#34;> å¦‚æœä½ è‡ªå·±å»ºäº†ç§æœ‰çš„é•œåƒä»“åº“ï¼Œéœ€è¦ dockerd ç»•è¿‡ä»£ç†æœåŠ¡å™¨ç›´è¿ï¼Œé‚£ä¹ˆé…ç½® NO_PROXY å˜é‡ï¼Œå¤šä¸ª NO_PROXY å˜é‡çš„å€¼ç”¨é€—å·åˆ†éš”ï¼Œè€Œä¸”å¯ä»¥ä½¿ç”¨é€šé…ç¬¦ï¼ˆ*ï¼‰ï¼Œæç«¯æƒ…å†µä¸‹ï¼Œå¦‚æœ NO_PROXY=*ï¼Œé‚£ä¹ˆæ‰€æœ‰è¯·æ±‚éƒ½å°†ä¸é€šè¿‡ä»£ç†æœåŠ¡å™¨ã€‚å¦‚æœä¸éœ€è¦å¯ä»¥ç›´æ¥ä¸è®¾ç½®è¿™ä¸ªå˜é‡- é‡å¯æœåŠ¡shell$ sudo systemctl daemon-reload$ sudo systemctl restart docker- æ£€æŸ¥é…ç½®shell$ sudo systemctl show --property=Environment docker[sudo] password for zheng:Environment=HTTP_PROXY=http://127.0.0.1:7890 HTTPS_PROXY=http://127.0.0.1:7890è®¾ç½®æˆåŠŸğŸ‰ "><title>Docker å®¢æˆ·ç«¯(Linux)é…ç½®ä»£ç† pull é•œåƒ</title><link rel="shortcut icon" type=image/x-icon href=/issues-blog/><link rel=stylesheet href=/issues-blog/css/main.ebe15b0394daa6798b8a40aa572a71b5a7a1beb8cc02c392f5c142e7d08ddb6052e049639385106440b538f394884685082b7441eef27a6a8315ec723155dc15.css integrity="sha512-6+FbA5TapnmLikCqVypxtaehvrjMAsOS9cFC59CN22BS4Eljk4UQZEC1OPOUiEaFCCt0Qe7yemqDFexyMVXcFQ=="></head><body a=auto><main class=page-content aria-label=Content><div class=w><a href=/>..</a><article><p class=post-meta><time datetime="2023-03-17 14:58:24 +0800 +0800">2023-03-17</time></p><h1>Docker å®¢æˆ·ç«¯(Linux)é…ç½®ä»£ç† pull é•œåƒ</h1><h2 id=åŸå› -èº«å¤„å¢™å›½æ‹‰å–é•œåƒéå¸¸æ…¢æ‰€ä»¥è¦è®¾ç½®ä»£ç†æ¥æå‡æ‹‰å–é•œåƒçš„é€Ÿåº¦---è®¾ç½®æ–¹æ³•---åˆ›å»ºæ–‡ä»¶å¤¹-shell--sudo-mkdir--p-etcsystemdsystemdockerserviced----æ–°å»ºé…ç½®æ–‡ä»¶-shell--sudo-vim-etcsystemdsystemdockerservicedhttp-proxyconf--å¡«å…¥ä»£ç†é…ç½®-toml-service-environmenthttp_proxyhttp1270017890-environmenthttps_proxyhttp1270017890-environmentno_proxyyour-registrycom10101010examplecom---å¦‚æœä½ è‡ªå·±å»ºäº†ç§æœ‰çš„é•œåƒä»“åº“éœ€è¦-dockerd-ç»•è¿‡ä»£ç†æœåŠ¡å™¨ç›´è¿é‚£ä¹ˆé…ç½®-no_proxy-å˜é‡å¤šä¸ª-no_proxy-å˜é‡çš„å€¼ç”¨é€—å·åˆ†éš”è€Œä¸”å¯ä»¥ä½¿ç”¨é€šé…ç¬¦æç«¯æƒ…å†µä¸‹å¦‚æœ-no_proxyé‚£ä¹ˆæ‰€æœ‰è¯·æ±‚éƒ½å°†ä¸é€šè¿‡ä»£ç†æœåŠ¡å™¨å¦‚æœä¸éœ€è¦å¯ä»¥ç›´æ¥ä¸è®¾ç½®è¿™ä¸ªå˜é‡----é‡å¯æœåŠ¡-shell--sudo-systemctl-daemon-reload--sudo-systemctl-restart-docker----æ£€æŸ¥é…ç½®-shell--sudo-systemctl-show---propertyenvironment-docker-sudo-password-for-zheng-environmenthttp_proxyhttp1270017890-https_proxyhttp1270017890--è®¾ç½®æˆåŠŸ>åŸå› 
èº«å¤„å¢™å›½ï¼Œæ‹‰å–é•œåƒéå¸¸æ…¢ï¼Œæ‰€ä»¥è¦è®¾ç½®ä»£ç†æ¥æå‡æ‹‰å–é•œåƒçš„é€Ÿåº¦ã€‚
## è®¾ç½®æ–¹æ³•
- åˆ›å»ºæ–‡ä»¶å¤¹
<code>shell
$ sudo mkdir -p /etc/systemd/system/docker.service.d</code>
- æ–°å»ºé…ç½®æ–‡ä»¶
<code>shell
$ sudo vim /etc/systemd/system/docker.service.d/http-proxy.conf</code>
å¡«å…¥ä»£ç†é…ç½®ï¼š
<code>toml
[Service]
Environment="HTTP_PROXY=http://127.0.0.1:7890"
Environment="HTTPS_PROXY=http://127.0.0.1:7890"
Environment="NO_PROXY=your-registry.com,10.10.10.10,*.example.com"</code>
> å¦‚æœä½ è‡ªå·±å»ºäº†ç§æœ‰çš„é•œåƒä»“åº“ï¼Œéœ€è¦ dockerd ç»•è¿‡ä»£ç†æœåŠ¡å™¨ç›´è¿ï¼Œé‚£ä¹ˆé…ç½® <code>NO_PROXY</code> å˜é‡ï¼Œå¤šä¸ª <code>NO_PROXY</code> å˜é‡çš„å€¼ç”¨é€—å·åˆ†éš”ï¼Œè€Œä¸”å¯ä»¥ä½¿ç”¨é€šé…ç¬¦ï¼ˆ*ï¼‰ï¼Œæç«¯æƒ…å†µä¸‹ï¼Œå¦‚æœ <code>NO_PROXY=*</code>ï¼Œé‚£ä¹ˆæ‰€æœ‰è¯·æ±‚éƒ½å°†ä¸é€šè¿‡ä»£ç†æœåŠ¡å™¨ã€‚å¦‚æœä¸éœ€è¦å¯ä»¥ç›´æ¥ä¸è®¾ç½®è¿™ä¸ªå˜é‡
- é‡å¯æœåŠ¡
<code>shell
$ sudo systemctl daemon-reload
$ sudo systemctl restart docker</code>
- æ£€æŸ¥é…ç½®
<code>shell
$ sudo systemctl show --property=Environment docker
[sudo] password for zheng:
Environment=HTTP_PROXY=http://127.0.0.1:7890 HTTPS_PROXY=http://127.0.0.1:7890</code>
è®¾ç½®æˆåŠŸğŸ‰</h2></article></div></main></body></html>